(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{4804:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return a(1913)}])},1913:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j},loginValidationSchema:function(){return p}});var l=a(1549),r=a(4194),i=a(8960),n=a.n(i),t=a(3199),o=a(1247),d=a(4607);function c(){let{role:e,initialized:s}=(0,o.a)(),a="transition duration-150 hover:text-blue-700",r={client:"/dashboard/client",employee:"/dashboard/employee",receptionist:"/dashboard/receptionist",admin:"/dashboard/admin"},i=s?e:null,t=i&&i in r?r[i]:void 0;return(0,l.jsxs)("nav",{"aria-label":"Main navigation",className:"flex justify-between items-center p-4 bg-gray-100 shadow-md",children:[(0,l.jsx)(n(),{href:"/",className:"font-bold text-xl mr-4 ".concat(a),children:"Salon Black & White"}),(0,l.jsxs)("ul",{className:"flex space-x-4",children:[(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/",className:a,children:"Home"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/services",className:a,children:"Services"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/gallery",className:a,children:"Gallery"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/faq",className:a,children:"FAQ"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/contact",className:a,children:"Contact"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/appointments",className:a,onClick:()=>(0,d.L9)("begin_checkout",{cta:"navbar"}),children:"Book Now"})}),t?(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:t,className:a,children:"Dashboard"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/auth/login",className:a,children:"Login"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/auth/register",className:a,children:"Register"})})]}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/policy",className:a,children:"Policy"})}),(0,l.jsx)("li",{children:(0,l.jsx)(n(),{href:"/privacy",className:a,children:"Privacy"})})]})]})}function h(){return(0,l.jsx)("footer",{className:"bg-gray-100 p-4 text-center",children:"Footer"})}function m(e){let{children:s}=e;return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,l.jsx)(c,{}),(0,l.jsx)("main",{className:"flex-1 p-4",children:s}),(0,l.jsx)(h,{})]})}let u=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,x=e=>{let s={},a=e.email.trim();return a?u.test(a)||(s.email="Invalid email"):s.email="Email is required",e.password.trim()||(s.password="Password is required"),s},p={async validateAt(e,s){let a=x(s)[e];if(a)throw Error(a)},async validate(e){let s=x(e);if(Object.keys(s).length>0){var a,l;throw Error(null!==(l=null!==(a=s.email)&&void 0!==a?a:s.password)&&void 0!==l?l:"Invalid email")}return e},isValid:async e=>0===Object.keys(x(e)).length};function j(){let{login:e}=(0,o.a)(),s=(0,t.useRouter)(),[a,i]=(0,r.useState)({email:"",password:""}),[d,c]=(0,r.useState)({email:!1,password:!1}),[h,u]=(0,r.useState)({}),[p,j]=(0,r.useState)(""),[f,w]=(0,r.useState)(!1),g=(0,r.useMemo)(()=>a.email.trim(),[a.email]),y=()=>{let e=x({email:g,password:a.password});return u(e),0===Object.keys(e).length},b=async l=>{if(l.preventDefault(),j(""),!y()){c({email:!0,password:!0});return}w(!0);try{await e(g,a.password),s.push("/dashboard")}catch(e){j(e instanceof Error?e.message:"Login failed"),i(e=>({...e,password:""}))}finally{w(!1)}},v=e=>{c(s=>({...s,[e]:!0})),y()};return(0,l.jsxs)(m,{children:[(0,l.jsxs)("form",{onSubmit:e=>{b(e)},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{id:"email",name:"email",type:"email",value:a.email,onChange:e=>{let s=e.target.value;if(i(e=>({...e,email:s})),d.email){let e=x({email:s,password:a.password});u(s=>({...s,email:e.email}))}},onBlur:()=>v("email")}),d.email&&h.email&&(0,l.jsx)("p",{role:"alert",style:{color:"red"},children:h.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",children:"Password"}),(0,l.jsx)("input",{id:"password",name:"password",type:"password",value:a.password,onChange:e=>{let s=e.target.value;if(i(e=>({...e,password:s})),d.password){let e=x({email:a.email,password:s});u(s=>({...s,password:e.password}))}},onBlur:()=>v("password")}),d.password&&h.password&&(0,l.jsx)("p",{role:"alert",style:{color:"red"},children:h.password})]}),(0,l.jsx)("button",{type:"submit",disabled:f,children:f?"Loading...":"Login"}),p&&(0,l.jsx)("p",{role:"alert",style:{color:"red"},children:p})]}),(0,l.jsxs)("p",{children:["Nie masz konta?"," ",(0,l.jsx)(n(),{href:"/auth/register",children:"Zarejestruj siÄ™"})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4804)}),_N_E=e.O()}]);