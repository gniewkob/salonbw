"use strict";(()=>{var e={};e.id=200,e.ids=[200],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4108:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},7513:(e,t,r)=>{r.r(t),r.d(t,{config:()=>p,default:()=>d,routeModule:()=>f});var i={};r.r(i),r.d(i,{default:()=>u});var a=r(998),n=r(6409),l=r(4108);function o(){return globalThis.__INSTAGRAM_CACHE__||(globalThis.__INSTAGRAM_CACHE__=new Map),globalThis.__INSTAGRAM_CACHE__}let s=["/assets/img/slider/slider1.jpg","/assets/img/slider/slider2.jpg","/assets/img/slider/slider3.jpg"].map((e,t)=>({id:`local-${t}`,type:"IMAGE",imageUrl:e,caption:"Sample"}));async function u(e,t){let r=process.env.INSTAGRAM_ACCESS_TOKEN;if(!r){t.status(200).json({items:s,nextCursor:null,fallback:!0});return}let i="string"==typeof e.query.after?e.query.after:void 0,a="string"==typeof e.query.limit?e.query.limit:"12",n="1"===e.query.force||"true"===e.query.force,l=`after:${i??""}|limit:${a??""}`;if(!n){let e=function(e){let t=o(),r=t.get(e);return r?Date.now()>r.expiresAt?(t.delete(e),null):r:null}(l);if(e){t.status(200).json({...e.data});return}}let u=new URLSearchParams({fields:"id,caption,media_url,media_type,thumbnail_url",access_token:r,limit:a});i&&u.set("after",i);let d=`https://graph.instagram.com/me/media?${u.toString()}`;try{let e=await fetch(d,{method:"GET"});if(!e.ok)throw Error("upstream_error");let r=await e.json();if(r?.error)throw Error("upstream_error");let i=(r.data??[]).map(e=>"VIDEO"===e.media_type?{id:e.id,type:"VIDEO",videoUrl:e.media_url,posterUrl:e.thumbnail_url,caption:e.caption}:{id:e.id,type:"IMAGE",imageUrl:e.media_url,caption:e.caption});if(!i.length)throw Error("no_media");let a=r?.paging?.cursors?.after??null,n={items:i,nextCursor:a,fallback:!1};(function(e,t,r=6e4){o().set(e,{data:t,expiresAt:Date.now()+r})})(l,n),t.status(200).json(n)}catch{t.status(200).json({items:s,nextCursor:null,fallback:!0})}}let d=(0,l.l)(i,"default"),p=(0,l.l)(i,"config"),f=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/gallery",pathname:"/api/gallery",bundlePath:"",filename:""},userland:i})},6409:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},998:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=7513);module.exports=r})();