exports.id=682,exports.ids=[682],exports.modules={7395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(997),n=r(8960),o=r.n(n),a=r(3199),i=r(9993);function l(){let e=(0,a.useRouter)().pathname||"/";return e.startsWith("/dashboard")||e.startsWith("/auth")||e.startsWith("/appointments")?null:s.jsx("div",{className:"fixed bottom-4 right-4 z-50 md:hidden",children:s.jsx(o(),{href:"/appointments",onClick:()=>(0,i.L9)("begin_checkout",{cta:"fab"}),className:"px-4 py-3 rounded-full shadow-lg bg-blue-600 text-white font-semibold","aria-label":"Book an appointment",children:"Book Now"})})}},4288:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(997),n=r(6689),o=r(3199);function a(){(0,o.useRouter)();let[e,t]=(0,n.useState)(!1);return e?s.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 bg-brand-gold animate-pulse z-50"}):null}},3121:(e,t,r)=>{"use strict";r.d(t,{H:()=>T,a:()=>b});var s=r(997),n=r(6689),o=r(3199),a=r(7791);let i=()=>{},l=new a.S(()=>null,()=>i());function u(e){if("object"==typeof e&&null!==e&&("access_token"in e||"accessToken"in e))return"access_token"in e?{accessToken:e.access_token,refreshToken:e.refresh_token}:e;throw Error("Invalid token response")}async function c(e){try{let t=await l.request("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return u(t)}catch(e){throw Error(e instanceof Error?e.message:"Login failed")}}async function h(e){try{return await l.request("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){throw Error(e instanceof Error?e.message:"Registration failed")}}async function d(){try{let e="undefined"!=typeof localStorage?localStorage.getItem("refreshToken"):null,t=await l.request("/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});return u(t)}catch(e){throw Error(e instanceof Error?e.message:"Token refresh failed")}}let f=(0,n.createContext)(void 0),p="jwtToken",g=e=>null,y=(e,t)=>{},x=()=>{if("undefined"!=typeof document)return document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="))?.split("=")[1]};function T({children:e}){let t=(0,o.useRouter)(),[r,i]=(0,n.useState)(null),[l,u]=(0,n.useState)(null),[T,b]=(0,n.useState)(!1),[w,E]=(0,n.useState)(!1),[m,S]=(0,n.useState)(void 0),k=(0,n.useCallback)(e=>{y(p,e?.accessToken??null),y("refreshToken",e?.refreshToken??null)},[]),_=(0,n.useCallback)(()=>{u(null),i(null),E(!1),S(void 0),k(null)},[k]),v=(0,n.useCallback)(async()=>{console.log("AuthContext: handleLogout called"),_();try{await fetch("/api/auth/logout",{method:"POST"})}catch(e){console.error("Logout error:",e)}finally{t.push("/auth/login")}},[_,t]),R=(0,n.useMemo)(()=>new a.S(()=>g(p),()=>{console.log("AuthContext: ApiClient onLogout callback fired"),v()},e=>{k(e)},{requestInit:m?{headers:{"X-XSRF-TOKEN":m}}:void 0}),[m,v,k]),C=(0,n.useCallback)(async()=>{try{let e=await R.request("/users/profile",{headers:{"x-skip-logout":"true"}});u(e),i(e.role),E(!0)}catch(e){console.log("AuthContext: fetchProfile failed (expected for public)",e),E(!1),_()}},[R,v]),j=async(e,t)=>{k(await c({email:e,password:t})),S(x()),await C()},N=async e=>{await h(e),await j(e.email,e.password)},L=async()=>{try{let e=await d();k(e),S(x()),await C()}catch(e){throw v(),e}},U={user:l,role:r,initialized:T,isAuthenticated:w,login:j,register:N,logout:v,refresh:L,apiFetch:R.request.bind(R)};return s.jsx(f.Provider,{value:U,children:e})}function b(){let e=(0,n.useContext)(f);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},2806:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,p:()=>l});var s=r(997),n=r(6689);let o=(0,n.createContext)({success:()=>{},error:()=>{}}),a="undefined"!=typeof process&&!1;function i({children:e}){let[t,i]=(0,n.useState)(()=>(function(){if(!a)return null;try{return r(8922)}catch{return null}})()),l=(0,n.useRef)([]),u=(0,n.useMemo)(()=>{let e=(e,r)=>{if(t){t.toast[e](r);return}l.current.push({type:e,message:r})};return{success:t=>e("success",t),error:t=>e("error",t)}},[t]),c=t?.Toaster??null;return(0,s.jsxs)(o.Provider,{value:u,children:[e,c?s.jsx(c,{position:"top-right"}):null]})}function l(){return(0,n.useContext)(o)}},4682:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>x,reportWebVitals:()=>T});var n=r(997),o=r(6689),a=r(6505),i=r.n(a),l=r(3199),u=r(9752),c=r(3121),h=r(2806);r(9531);var d=r(4288),f=r(6310),p=r(9993),g=r(7395);r(9421);var y=e([u]);function x({Component:e,pageProps:t}){(0,l.useRouter)();let[r]=(0,o.useState)(()=>new u.QueryClient({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return n.jsx(u.QueryClientProvider,{client:r,children:n.jsx(c.H,{children:(0,n.jsxs)(h.V,{children:[(0,p.n)()&&(0,n.jsxs)(n.Fragment,{children:[n.jsx(i(),{src:`https://www.googletagmanager.com/gtag/js?id=${(0,p.uW)()}`,strategy:"afterInteractive"}),n.jsx(i(),{id:"ga4-init",strategy:"afterInteractive",children:`
                                    window.dataLayer = window.dataLayer || [];
                                    function gtag(){dataLayer.push(arguments);}
                                    gtag('js', new Date());
                                    gtag('config', '${(0,p.uW)()}', { send_page_view: false, anonymize_ip: true });
                                `})]}),n.jsx(d.Z,{}),n.jsx(g.Z,{}),n.jsx(e,{...t})]})})})}function T(e){try{(0,p.od)(e)}catch{}}u=(y.then?(await y)():y)[0],(0,f.j)(),s()}catch(e){s(e)}})},6310:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var s=r(8097);let n=!1;function o(){if(n)return;let e=process.env.NEXT_PUBLIC_SENTRY_DSN;if(!e)return;n=!0;let t=Number(process.env.NEXT_PUBLIC_SENTRY_TRACES_SAMPLE_RATE??.1),r=Number(process.env.NEXT_PUBLIC_SENTRY_REPLAYS_SESSION_SAMPLE_RATE??0),o=Number(process.env.NEXT_PUBLIC_SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE??1),a=[];((r??0)>0||(o??0)>0)&&a.push(s.replayIntegration()),s.init({dsn:e,enabled:!0,tracesSampleRate:t,replaysSessionSampleRate:r,replaysOnErrorSampleRate:o,integrations:a})}},9993:(e,t,r)=>{"use strict";r.d(t,{L9:()=>i,n:()=>n,od:()=>a,uW:()=>o});var s=r(8097);function n(){return!1}function o(){return process.env.NEXT_PUBLIC_GA_ID||""}function a(e){try{let t=s.metrics;if("function"==typeof t?.distribution){let r="CLS"===e.name?1e3*e.value:e.value;t.distribution(`web_vital.${e.name}`,r,{tags:{id:e.id}})}}catch{}}function i(e,t={}){}},9421:(e,t,r)=>{"use strict";process.env.NEXT_PUBLIC_ENABLE_CLIENT_LOGS,process.env.NEXT_PUBLIC_LOG_TOKEN},7791:(e,t,r)=>{"use strict";r.d(t,{S:()=>s});class s{constructor(e,t,r,s={}){this.getAccessToken=e,this.onLogout=t,this.onTokenRefresh=r,this.options=s;let n=s.baseUrl??"http://localhost:3001"??"http://localhost:3000";try{let e=new URL(n);this.baseUrl="http:"===e.protocol||"https:"===e.protocol?n.replace(/\/api\/?$/,""):"http://localhost:3000"}catch{n.startsWith("/")?this.baseUrl=n.replace(/\/api\/?$/,""):this.baseUrl="http://localhost:3000"}this.defaultHeaders={"Content-Type":"application/json",...s.headers}}debugEnabled(){return"undefined"!=typeof process&&"true"===process.env.NEXT_PUBLIC_ENABLE_DEBUG}generateRequestId(){let e="undefined"!=typeof globalThis?globalThis.crypto:void 0;return e?.randomUUID?e.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random();return("x"===e?Math.floor(t):Math.floor(t)%4+8).toString(16)})}getRefreshToken(){if("function"==typeof this.options.getRefreshToken)try{return this.options.getRefreshToken()}catch{}return null}buildUrl(e,t){let r=e.startsWith("http://")||e.startsWith("https://")?e:`${this.baseUrl.replace(/\/$/,"")}${e.startsWith("/")?e:`/${e}`}`;if(!t||0===Object.keys(t).length)return r;let s=new URLSearchParams;for(let[e,r]of Object.entries(t))null!=r&&(Array.isArray(r)?r.forEach(t=>s.append(e,String(t))):s.append(e,String(r)));let n=r.includes("?")?"&":"?";return`${r}${n}${s.toString()}`}async refreshTokens(){let e=this.getRefreshToken();if(!e)return null;try{var t;let r=await fetch(this.buildUrl("/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({refreshToken:e})});if(!r.ok)return null;let s=(t=await r.json(),"access_token"in t?{accessToken:t.access_token,refreshToken:t.refresh_token}:t);return this.onTokenRefresh?.(s),s}catch{return null}}async execute(e,t={},r=!0){let s=this.options.requestInit??{},n={...s,...t},o=new Headers(this.defaultHeaders);new Headers(s.headers??{}).forEach((e,t)=>o.set(t,e)),new Headers(t.headers??{}).forEach((e,t)=>o.set(t,e)),!o.has("Content-Type")&&t.body&&o.set("Content-Type","application/json");let a=this.getAccessToken();a&&o.set("Authorization",`Bearer ${a}`);let i=o.has("x-skip-logout");i&&o.delete("x-skip-logout"),this.debugEnabled()&&!o.has("X-Request-Id")&&o.set("X-Request-Id",this.generateRequestId());let l=String(n.method??t.method??"GET").toUpperCase();if("GET"!==l&&"undefined"!=typeof document){let e=document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="))?.split("=")[1];e&&o.set("X-XSRF-TOKEN",e)}let u=await fetch(this.buildUrl(e),{...n,method:l,headers:o,credentials:"include"});if(401===u.status&&r){let r=await this.refreshTokens();if(r){o.set("Authorization",`Bearer ${r.accessToken}`);let s=await fetch(this.buildUrl(e),{...t,headers:o,credentials:"include"});return this.handleResponse(s)}throw i||this.onLogout(),this.createError(u,"Unauthorized")}return 401!==u.status||i||this.onLogout(),this.handleResponse(u)}async handleResponse(e){let t=e.headers.get("x-request-id");if(t&&this.debugEnabled()&&"undefined"!=typeof console&&console.debug("[api] x-request-id:",t),204===e.status)return;let r=e.headers.get("content-type")??"";if(!e.ok){if(r.includes("application/json")){let t=await e.json();throw this.createError(e,t.message)}let t=await e.text();throw this.createError(e,t||e.statusText)}return r.includes("application/json")?await e.json():r.includes("text/")&&await e.text()||void 0}createError(e,t){let r=Error(t||e.statusText);return r.status=e.status,r}async request(e,t={}){return this.execute(e,t)}async requestTyped(e){let t=String(e.method).toUpperCase(),r=String(e.path);if(e.pathParams)for(let[t,s]of Object.entries(e.pathParams))r=r.replace(`{${t}}`,encodeURIComponent(String(s)));let s=void 0!==e.body?JSON.stringify(e.body):void 0;return this.execute(this.buildUrl(r,e.query),{method:t,body:s,headers:e.headers})}}},9531:()=>{}};